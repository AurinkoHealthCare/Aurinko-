import{r as u,j as e,a as v}from"./index-Dg0sH7Ks.js";import{y as n}from"./index-Dlz4q_FO.js";/* empty css                      */import{F}from"./file-text-Djbx8J3R.js";import{U as b}from"./upload-HivPhWLX.js";import{L as D}from"./loader-circle-BWNAvajI.js";import"./clsx-B-dksMZM.js";import"./createLucideIcon-CixBgJK_.js";const f=10,y={title:"",details:"",category:"Reports",type:""},P=s=>{s.response?n.error(`‚ùå [${s.response.status}] ${s.response.data?.error||"Something went wrong!"}`):s.request?n.error("‚ùå No response from server. Please try again!"):n.error(`‚ùå Request error: ${s.message}`)};function A({onUpload:s}){const[t,m]=u.useState(y),[l,x]=u.useState(null),[r,p]=u.useState(!1),[i,d]=u.useState(""),g=u.useRef(null),h=o=>{m({...t,[o.target.name]:o.target.value})},j=o=>{const a=o.target.files[0];if(a){if(a.type!=="application/pdf"){n.warn("‚ö†Ô∏è Only PDF files are allowed!");return}if(a.size>f*1024*1024){n.warn(`‚ö†Ô∏è File must be less than ${f} MB`);return}x(a)}},w=()=>{m(y),x(null),g.current&&(g.current.value=""),d("")},N=async o=>{if(o.preventDefault(),!t.title.trim()||!t.type.trim()||!l){n.warn("‚ö†Ô∏è Title, Type and PDF are required!"),d("‚ö†Ô∏è Please fill all required fields!");return}const a=new FormData;Object.keys(t).forEach(c=>a.append(c,t[c].trim())),a.append("pdf",l);try{p(!0),d("‚è≥ Uploading..."),await v.post("/pdf/upload",a,{headers:{"Content-Type":"multipart/form-data"}}),n.success("‚úÖ PDF uploaded successfully!"),d("‚úÖ PDF uploaded successfully!"),w(),typeof s=="function"&&s()}catch(c){console.error("Upload Error:",c),P(c),d("‚ùå Upload failed. Please try again!")}finally{p(!1)}};return e.jsxs("div",{className:"max-w-lg mx-auto bg-white shadow-xl rounded-3xl overflow-hidden transition-all duration-500",children:[e.jsxs("div",{className:"bg-gradient-to-br from-indigo-700 via-blue-600 to-blue-500 p-5 text-center rounded-b-3xl",children:[e.jsx(F,{className:"w-12 h-12 text-white mx-auto mb-3"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:"Upload a PDF"}),e.jsx("p",{className:"text-indigo-200 text-sm mt-1",children:"Effortlessly upload and manage your documents"})]}),e.jsxs("div",{className:"p-7",children:[e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsx(C,{label:"PDF Title",required:!0,name:"title",value:t.title,onChange:h,disabled:r,placeholder:"Enter a title"}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:["PDF Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"type",value:t.type,onChange:h,disabled:r,className:"border border-gray-300 p-3 rounded-xl w-full focus:ring-2 focus:ring-indigo-500 outline-none shadow-inner bg-gray-50",children:[e.jsx("option",{value:"",children:"Select Type"}),e.jsx("option",{value:"Human",children:"Human"}),e.jsx("option",{value:"Veterinary",children:"Veterinary"}),e.jsx("option",{value:"Agriculture",children:"Agriculture"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"PDF Details"}),e.jsx("textarea",{name:"details",placeholder:"Optional details about PDF",value:t.details,onChange:h,rows:"3",className:"border border-gray-300 p-3 rounded-xl w-full focus:ring-2 focus:ring-indigo-500 outline-none shadow-inner bg-gray-50 resize-none",disabled:r})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:["Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"category",value:t.category,onChange:h,className:"border border-gray-300 p-3 rounded-xl w-full focus:ring-2 focus:ring-indigo-500 outline-none shadow-inner bg-gray-50",disabled:r,children:[e.jsx("option",{value:"Reports",children:"Reports"}),e.jsx("option",{value:"Articles",children:"Articles"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:["PDF File ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center cursor-pointer hover:border-indigo-600 hover:bg-indigo-50 transition-all",onClick:()=>g.current?.click(),children:[e.jsx(b,{className:"w-9 h-9 mx-auto text-indigo-500 mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:l?e.jsxs("span",{className:"font-medium text-gray-800",children:["üìÇ ",l.name," (",(l.size/1024/1024).toFixed(2)," MB)"]}):`Click to select a PDF file (Max ${f} MB)`})]}),e.jsx("input",{type:"file",accept:"application/pdf",ref:g,onChange:j,className:"hidden",disabled:r})]}),e.jsx("button",{type:"submit",disabled:r,className:`w-full py-3 px-4 rounded-xl text-white font-semibold flex justify-center items-center gap-2 transition-all duration-300 shadow-md ${r?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-indigo-600 to-blue-600 hover:from-indigo-700 hover:to-blue-700"}`,children:r?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"animate-spin w-5 h-5"})," Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"w-5 h-5"})," Upload PDF"]})})]}),i&&e.jsx("p",{className:`text-center mt-5 text-base font-semibold ${i.includes("‚úÖ")?"text-green-600":i.includes("‚ö†Ô∏è")?"text-yellow-600":i.includes("‚ùå")?"text-red-600":"text-gray-700"}`,children:i})]})]})}function C({label:s,name:t,value:m,onChange:l,placeholder:x,disabled:r,required:p}){return e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[s," ",p&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:t,placeholder:x,value:m,onChange:l,disabled:r,className:"border border-gray-300 p-3 rounded-xl w-full focus:ring-2 focus:ring-indigo-500 outline-none shadow-inner bg-gray-50"})]})}export{A as default};
