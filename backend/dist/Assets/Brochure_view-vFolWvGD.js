import{r,a as x,j as t}from"./index-Dg0sH7Ks.js";const S=()=>{const[p,l]=r.useState([]),[c,f]=r.useState("all"),[y,g]=r.useState(!0),[i,o]=r.useState(null),[d,u]=r.useState(""),[n,m]=r.useState(null),[v,h]=r.useState(null);r.useEffect(()=>{N()},[]);const N=async()=>{try{g(!0);const e=await x.get("/brochures/all"),a=Array.isArray(e.data)?e.data:e.data.data||[];l(a)}catch(e){console.error("Error fetching images",e),l([])}finally{g(!1)}},b=async e=>{try{await x.delete(`/brochures/${e}`),l(a=>a.filter(s=>s._id!==e))}catch(a){console.error("Error deleting image",a)}},w=e=>{o(e._id),u(e.name||""),h(e.url),m(null)},C=async()=>{try{const e=new FormData;e.append("name",d),n&&e.append("image",n),await x.put(`/brochures/${i}`,e,{headers:{"Content-Type":"multipart/form-data"}}),l(a=>a.map(s=>s._id===i?{...s,name:d,url:n?URL.createObjectURL(n):s.url}:s)),o(null),u(""),m(null),h(null)}catch(e){console.error("Error updating image",e)}},j=c==="all"?p:p.filter(e=>e.category?.toLowerCase()===c.toLowerCase());return y?t.jsx("div",{className:"text-center py-10",children:"Loading..."}):t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold",children:"Brochures Gallery"}),t.jsxs("select",{value:c,onChange:e=>f(e.target.value),className:"border border-gray-300 p-2 rounded-lg",children:[t.jsx("option",{value:"all",children:"All Categories"}),t.jsx("option",{value:"Human",children:"Human"}),t.jsx("option",{value:"Veterinary",children:"Veterinary"}),t.jsx("option",{value:"Agriculture",children:"Agriculture"})]})]}),j.length===0?t.jsx("div",{children:"No images found"}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:j.map(e=>t.jsx("div",{className:"border rounded-lg shadow p-4 flex flex-col items-center bg-white",children:i===e._id?t.jsxs("div",{className:"w-full",children:[t.jsxs("label",{className:"block cursor-pointer",children:[t.jsx("img",{src:v,alt:"preview",className:"w-full h-40 object-cover rounded hover:opacity-80 transition"}),t.jsx("input",{type:"file",accept:"image/*",onChange:a=>{const s=a.target.files[0];s&&(m(s),h(URL.createObjectURL(s)))},className:"hidden"})]}),t.jsx("input",{type:"text",value:d,onChange:a=>u(a.target.value),className:"border p-2 w-full rounded mt-3",placeholder:"Enter image name"}),t.jsxs("div",{className:"flex gap-2 mt-3",children:[t.jsx("button",{onClick:C,className:"bg-green-500 text-white px-3 py-1 rounded",children:"Save"}),t.jsx("button",{onClick:()=>o(null),className:"bg-gray-400 text-white px-3 py-1 rounded",children:"Cancel"})]})]}):t.jsxs(t.Fragment,{children:[t.jsx("img",{src:e.url,alt:e.name,className:"w-full h-48 object-cover rounded"}),t.jsxs("div",{className:"mt-3 text-center w-full",children:[t.jsx("p",{className:"font-medium",children:e.name||"No Name"}),t.jsx("p",{className:"text-sm text-gray-500",children:e.category}),t.jsxs("div",{className:"flex gap-2 justify-center mt-2",children:[t.jsx("button",{onClick:()=>w(e),className:"bg-blue-500 text-white px-3 py-1 rounded",children:"Edit"}),t.jsx("button",{onClick:()=>b(e._id),className:"bg-red-500 text-white px-3 py-1 rounded",children:"Delete"})]})]})]})},e._id))})]})};export{S as default};
