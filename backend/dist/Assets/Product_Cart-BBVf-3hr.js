import{r as u,j as a,a as v}from"./index-Dg0sH7Ks.js";const f=()=>{const[l,n]=u.useState([{image:null,name:"",category:"",details:"",rating:1,preview:"",translations:{fr:{},es:{},ar:{},ko:{}}}]),[c,m]=u.useState(null),g=(s,t)=>{const e=s.target.files[0],r=[...l];r[t].image=e,r[t].preview=URL.createObjectURL(e),n(r)},o=(s,t)=>{const{name:e,value:r}=s.target,d=[...l];d[t][e]=e==="rating"?parseInt(r,10):r,n(d)},i=(s,t,e)=>{const{name:r,value:d}=s.target,p=[...l];p[t].translations[e][r]=d,n(p)},h=()=>{if(l.length>=5){alert("❌ Maximum 5 products allowed per submission");return}n([...l,{image:null,name:"",category:"",details:"",rating:1,preview:"",translations:{fr:{},es:{},ar:{},ko:{}}}])},x=async s=>{s.preventDefault();try{for(const t of l){const e=new FormData;e.append("name",t.name),e.append("category",t.category),e.append("details",t.details),e.append("rating",t.rating),e.append("translations",JSON.stringify(t.translations)),t.image&&e.append("image",t.image);const{data:r}=await v.post("/products/add",e,{headers:{"Content-Type":"multipart/form-data"}});console.log("✅ Saved:",r)}alert("✅ All products saved successfully!"),n([{image:null,name:"",category:"",details:"",rating:1,preview:"",translations:{fr:{},es:{},ar:{},ko:{}}}])}catch(t){console.error("❌ Error saving products:",t),alert("❌ Failed to save products. Check console for details.")}};return a.jsxs("div",{className:"p-4 max-w-5xl mx-auto text-sm",children:[a.jsx("h2",{className:"text-xl font-bold mb-3 text-center text-green-700 uppercase",children:"Add Product Info"}),a.jsxs("form",{onSubmit:x,children:[l.map((s,t)=>a.jsxs("div",{className:"border rounded-md p-3 mb-5 bg-white shadow",children:[a.jsxs("h3",{className:"font-semibold mb-3 text-base text-blue-600",children:["📦 Product ",t+1]}),a.jsx("div",{className:"flex flex-wrap gap-4 mb-3",children:a.jsxs("div",{children:[s.preview&&a.jsx("img",{src:s.preview,alt:"Preview",onClick:()=>m(s.preview),className:"w-20 h-20 object-cover rounded border cursor-pointer hover:scale-105 transition"}),a.jsx("input",{type:"file",accept:"image/*",onChange:e=>g(e,t),className:"mt-1 text-xs",required:!0})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[a.jsx("input",{type:"text",name:"name",value:s.name,onChange:e=>o(e,t),placeholder:"Product Name (English)",className:"border p-1.5 rounded w-full",required:!0}),a.jsx("input",{type:"text",name:"category",value:s.category,onChange:e=>o(e,t),placeholder:"Category (English)",className:"border p-1.5 rounded w-full",required:!0}),a.jsx("textarea",{name:"details",value:s.details,onChange:e=>o(e,t),placeholder:"Details (English)",className:"border p-1.5 rounded w-full md:col-span-2",rows:"3",required:!0}),a.jsxs("select",{name:"rating",value:s.rating,onChange:e=>o(e,t),className:"border p-1.5 rounded w-full",required:!0,children:[a.jsx("option",{value:"",disabled:!0,children:"Select Rating (1 to 5)"}),[1,2,3,4,5].map(e=>a.jsx("option",{value:e,children:e},e))]})]}),a.jsx("div",{className:"mt-4 grid grid-cols-1 gap-4",children:["fr","es","ar","ko"].map(e=>a.jsxs("div",{children:[a.jsxs("h4",{className:"text-gray-700 font-medium mb-1",children:[e.toUpperCase()," Translation"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[a.jsx("input",{type:"text",name:"name",value:s.translations[e]?.name||"",onChange:r=>i(r,t,e),placeholder:`Name (${e.toUpperCase()})`,className:"border p-1.5 rounded w-full"}),a.jsx("input",{type:"text",name:"category",value:s.translations[e]?.category||"",onChange:r=>i(r,t,e),placeholder:`Category (${e.toUpperCase()})`,className:"border p-1.5 rounded w-full"}),a.jsx("textarea",{name:"details",value:s.translations[e]?.details||"",onChange:r=>i(r,t,e),placeholder:`Details (${e.toUpperCase()})`,className:"border p-1.5 rounded w-full md:col-span-2",rows:"2"})]})]},e))})]},t)),a.jsxs("div",{className:"flex justify-between mt-4",children:[a.jsx("button",{type:"button",onClick:h,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded text-sm",children:"➕ Add More"}),a.jsx("button",{type:"submit",className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded text-sm",children:"✅ Save"})]})]}),c&&a.jsx("div",{onClick:()=>m(null),className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",children:a.jsx("img",{src:c,alt:"Full Preview",className:"max-w-3xl max-h-[80vh] rounded-lg shadow-2xl"})})]})};export{f as default};
