import{r as o,j as t,a as i}from"./index-Dg0sH7Ks.js";import{y as a}from"./index-Dlz4q_FO.js";import"./clsx-B-dksMZM.js";const C=()=>{const[n,c]=o.useState([]),[u,x]=o.useState(!1),[r,d]=o.useState(null),[l,m]=o.useState(""),p=async()=>{try{x(!0);const e=await i.get("/video/all");e.data?.success?c(e.data.data):a.error("Failed to fetch videos ❌")}catch{a.error("Server error ❌")}finally{x(!1)}};o.useEffect(()=>{p()},[]);const g=async e=>{if(window.confirm("Are you sure you want to delete this video? ❌"))try{const s=await i.delete(`/video/delete/${e}`);s.data?.success?(a.success(s.data.message||"Deleted ✅"),c(w=>w.filter(b=>b._id!==e))):a.error(s.data?.message||"Delete failed ❌")}catch{a.error("Delete error ❌")}},h=e=>{d(e),m(e.title)},f=async()=>{if(!l)return a.error("Title cannot be empty ❌");try{const e=new FormData;e.append("title",l),r.newFile&&e.append("video",r.newFile);const s=await i.put(`/video/update/${r._id}`,e,{headers:{"Content-Type":"multipart/form-data"}});s.data?.success?(a.success(s.data.message||"Updated ✅"),d(null),p()):a.error(s.data?.message||"Update failed ❌")}catch{a.error("Server error ❌")}},v=e=>{const s=e.target.files?.[0];if(s){if(s.size>30*1024*1024)return a.error("Max 30MB ❌");d({...r,newFile:s})}};return t.jsxs("div",{className:"p-6 bg-white shadow-lg rounded-xl w-full max-w-5xl mx-auto",children:[t.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:"Manage Videos"}),u&&t.jsx("p",{className:"text-gray-500 text-center",children:"Loading videos..."}),!u&&n.length===0&&t.jsx("p",{className:"text-gray-500 text-center",children:"No videos uploaded."}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:n.map(e=>t.jsxs("div",{className:"border rounded-lg overflow-hidden shadow hover:shadow-lg transition p-3",children:[t.jsxs("video",{controls:!0,className:"w-full h-40 object-cover mb-2 rounded",children:[t.jsx("source",{src:e.url,type:"video/mp4"}),"Your browser does not support the video tag."]}),r?._id===e._id?t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("input",{type:"text",value:l,onChange:s=>m(s.target.value),className:"border p-2 rounded w-full"}),t.jsx("input",{type:"file",accept:"video/*",onChange:v}),t.jsxs("div",{className:"flex gap-2 mt-2",children:[t.jsx("button",{onClick:f,className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-sm",children:"Save"}),t.jsx("button",{onClick:()=>d(null),className:"bg-gray-400 hover:bg-gray-500 text-white px-3 py-1 rounded text-sm",children:"Cancel"})]})]}):t.jsxs(t.Fragment,{children:[t.jsx("p",{className:"font-semibold",children:e.title}),t.jsxs("div",{className:"flex gap-2 mt-2",children:[t.jsx("button",{onClick:()=>h(e),className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm",children:"Edit"}),t.jsx("button",{onClick:()=>g(e._id),className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm",children:"Delete"})]})]})]},e._id))})]})};export{C as default};
