import{r as s,j as t,a as x}from"./index-Dg0sH7Ks.js";import{y as l}from"./index-Dlz4q_FO.js";/* empty css                      */import"./clsx-B-dksMZM.js";const h=10,P=()=>{const[n,p]=s.useState([]),[o,g]=s.useState(!1),[d,f]=s.useState("Reports"),[m,c]=s.useState(null),[r,i]=s.useState({title:"",details:"",category:"Reports",file:null}),u=async()=>{try{g(!0);const e=await x.get(`/pdf/${d}`);p(e.data.data||[])}catch{l.error("❌ Failed to fetch PDFs!"),p([])}finally{g(!1)}};s.useEffect(()=>{u()},[d]);const y=async e=>{if(window.confirm("⚠️ Are you sure you want to delete this PDF?"))try{await x.delete(`/pdf/${e}`),l.success("✅ PDF deleted!"),u()}catch{l.error("❌ Failed to delete PDF!")}},b=e=>{c(e._id),i({title:e.title,details:e.details||"",category:e.category,file:null})},w=e=>e?e.type!=="application/pdf"?(l.warn("⚠️ Only PDF files are allowed!"),!1):e.size>h*1024*1024?(l.warn(`⚠️ File size must be under ${h} MB`),!1):!0:!0,j=async e=>{if(!r.title.trim()){l.warn("⚠️ Title is required!");return}if(!(r.file&&!w(r.file)))try{const a=new FormData;a.append("title",r.title.trim()),a.append("details",r.details.trim()),a.append("category",r.category),r.file&&a.append("pdf",r.file),await x.put(`/pdf/${e}`,a,{headers:{"Content-Type":"multipart/form-data"}}),l.success("✅ PDF updated!"),c(null),u()}catch{l.error("❌ Failed to update PDF!")}};return t.jsxs("div",{className:"max-w-4xl mx-auto bg-white shadow-lg rounded-2xl p-4 sm:p-6",children:[t.jsx("h3",{className:"text-xl font-bold mb-5 text-gray-800 text-center",children:"📑 PDF List"}),t.jsx("div",{className:"flex justify-center mb-4",children:t.jsxs("select",{value:d,onChange:e=>f(e.target.value),className:"border border-gray-300 p-2 rounded-lg focus:ring-2 focus:ring-blue-500 w-full sm:w-auto",children:[t.jsx("option",{value:"Reports",children:"Reports"}),t.jsx("option",{value:"Articles",children:"Articles"})]})}),o?t.jsx("p",{className:"text-center text-gray-600",children:"⏳ Loading PDFs..."}):!Array.isArray(n)||n.length===0?t.jsx("p",{className:"text-center text-gray-500",children:"No PDFs found."}):t.jsx("ul",{className:"space-y-4",children:n.map(e=>t.jsxs("li",{className:"border rounded-lg p-4 flex flex-col sm:flex-row justify-between gap-3",children:[m===e._id?t.jsxs("div",{className:"flex-1 space-y-2",children:[t.jsx("input",{type:"text",value:r.title,onChange:a=>i({...r,title:a.target.value}),className:"border border-gray-300 p-2 rounded-lg w-full"}),t.jsx("textarea",{value:r.details,onChange:a=>i({...r,details:a.target.value}),rows:"2",placeholder:"Enter PDF details",className:"border border-gray-300 p-2 rounded-lg w-full resize-none"}),t.jsxs("select",{value:r.category,onChange:a=>i({...r,category:a.target.value}),className:"border border-gray-300 p-2 rounded-lg w-full",children:[t.jsx("option",{value:"Reports",children:"Reports"}),t.jsx("option",{value:"Articles",children:"Articles"})]}),t.jsx("input",{type:"file",accept:"application/pdf",onChange:a=>i({...r,file:a.target.files[0]}),className:"border border-gray-300 p-2 rounded-lg w-full"}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx("button",{onClick:()=>j(e._id),disabled:o,className:"bg-green-600 text-white px-3 py-1 rounded-lg hover:bg-green-700 disabled:opacity-50",children:"Save"}),t.jsx("button",{onClick:()=>c(null),className:"bg-gray-400 text-white px-3 py-1 rounded-lg hover:bg-gray-500",children:"Cancel"})]})]}):t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-semibold break-words",children:e.title}),e.details&&t.jsx("p",{className:"text-sm text-gray-600 italic break-words",children:e.details}),t.jsx("p",{className:"text-sm text-gray-500",children:e.category}),t.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-sm",children:"View PDF"})]}),m!==e._id&&t.jsxs("div",{className:"flex gap-2 flex-wrap sm:flex-col sm:items-end",children:[t.jsx("button",{onClick:()=>b(e),className:"bg-blue-600 text-white px-3 py-1 rounded-lg hover:bg-blue-700 w-full sm:w-auto",children:"Edit"}),t.jsx("button",{onClick:()=>y(e._id),disabled:o,className:"bg-red-600 text-white px-3 py-1 rounded-lg hover:bg-red-700 disabled:opacity-50 w-full sm:w-auto",children:"Delete"})]})]},e._id))})]})};export{P as default};
