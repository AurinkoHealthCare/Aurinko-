import{r as s,a as u,j as a}from"./index-Dg0sH7Ks.js";const D=n=>"★".repeat(Number(n))+"☆".repeat(5-Number(n)),L=()=>{const[n,p]=s.useState([]),[y,m]=s.useState([]),[b,j]=s.useState([]),[i,w]=s.useState("all"),[x,h]=s.useState(null),[v,o]=s.useState(!1),[l,f]=s.useState({name:"",category:"",details:"",image:null,preview:"",rating:0,translations:{fr:{},es:{},ar:{},ko:{}}}),[r,N]=s.useState("en");s.useEffect(()=>{g()},[r]),s.useEffect(()=>{m(i==="all"?n:n.filter(e=>e.category.toLowerCase()===i.toLowerCase()))},[i,n]);const g=async()=>{try{o(!0);const{data:e}=await u.get(`/products/get?lang=${r}`);p(e),m(e);const t=[...new Set(e.map(d=>d.category).filter(Boolean))];j(t)}catch{alert("Failed to fetch products.")}finally{o(!1)}},S=async e=>{if(window.confirm("Are you sure you want to delete this product?"))try{o(!0),await u.delete(`/products/delete/${e}`),await g(),alert("✅ Product deleted successfully!")}catch(t){console.error("❌ Error deleting product:",t),alert("Delete failed. Check console for details.")}finally{o(!1)}},C=e=>{h(e.productId),f({name:e.name,category:e.category,details:e.details,image:null,preview:e.image,rating:e.rating||0,translations:e.translations||{fr:{},es:{},ar:{},ko:{}}})},E=async e=>{e.preventDefault();try{o(!0);const t=new FormData;t.append("name",l.name),t.append("category",l.category),t.append("details",l.details),t.append("rating",l.rating),t.append("translations",JSON.stringify(l.translations)),l.image&&t.append("image",l.image),await u.put(`/products/update/${x}`,t,{headers:{"Content-Type":"multipart/form-data"}}),await g(),h(null),f({name:"",category:"",details:"",image:null,preview:"",rating:0,translations:{fr:{},es:{},ar:{},ko:{}}}),alert("✅ Product updated successfully!")}catch{alert("Update failed. Check console for details.")}finally{o(!1)}};return a.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[a.jsx("h1",{className:"text-3xl font-extrabold mb-8 text-center text-green-700",children:"📦 GLOBAL PROVIDER LIST"}),a.jsxs("div",{className:"mb-6 flex flex-wrap justify-center gap-4",children:[a.jsxs("select",{value:r,onChange:e=>N(e.target.value),className:"border p-2 rounded-lg shadow-sm",children:[a.jsx("option",{value:"en",children:"English"}),a.jsx("option",{value:"fr",children:"French"}),a.jsx("option",{value:"es",children:"Spanish"}),a.jsx("option",{value:"ar",children:"Arabic"}),a.jsx("option",{value:"ko",children:"Korean"})]}),a.jsxs("select",{value:i,onChange:e=>w(e.target.value),className:"border p-2 rounded-lg shadow-sm",children:[a.jsx("option",{value:"all",children:"All Categories"}),b.map((e,t)=>a.jsx("option",{value:e,children:e},t))]})]}),v&&a.jsx("p",{className:"text-center text-blue-600 mb-6",children:"⏳ Loading..."}),x&&a.jsx("form",{onSubmit:E,className:"border border-gray-200 rounded-2xl shadow-lg p-6 bg-white mb-10"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:y.map((e,t)=>{const d=e.productId,c=r==="en"?e:{...e,name:e.translations[r]?.name||e.name,category:e.translations[r]?.category||e.category,details:e.translations[r]?.details||e.details};return a.jsxs("div",{className:"border rounded-2xl bg-white shadow-md hover:shadow-xl transition-all duration-300 p-4 flex flex-col",children:[a.jsx("div",{className:"relative h-64 w-full mb-4 overflow-hidden rounded-xl",children:a.jsx("img",{src:e.image,alt:c.name,className:"w-full h-full object-contain transition-transform duration-300 hover:scale-105"})}),a.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:c.name}),a.jsxs("p",{className:"text-sm text-gray-500 mb-1",children:[a.jsx("span",{className:"font-semibold text-gray-600",children:"Category:"})," ",c.category]}),a.jsx("div",{className:"text-sm text-gray-700 mb-3 h-30 overflow-y-auto rounded-md p-2 no-scrollbar",children:c.details}),a.jsxs("p",{className:"text-yellow-500 text-lg font-medium mb-4",children:[D(e.rating)," ",a.jsxs("span",{className:"text-gray-500 text-sm ml-1",children:["(",e.rating," Stars)"]})]}),a.jsxs("div",{className:"mt-auto flex justify-between gap-3",children:[a.jsx("button",{onClick:()=>C(e),className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition",children:"✏️ Edit"}),a.jsx("button",{onClick:()=>S(d),className:"flex-1 bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition",children:"🗑 Delete"})]})]},d||t)})})]})};export{L as default};
