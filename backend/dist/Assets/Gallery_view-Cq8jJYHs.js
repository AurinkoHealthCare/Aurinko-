import{r as o,j as t,a as n}from"./index-Dg0sH7Ks.js";const x=()=>{const[i,c]=o.useState([]),[s,d]=o.useState({}),l=async()=>{try{const{data:e}=await n.get("/gallery/all");c(e.data)}catch(e){console.error("Failed to fetch images:",e)}};o.useEffect(()=>{l()},[]);const h=async e=>{if(window.confirm("Delete this image?"))try{await n.delete(`/gallery/delete/${e}`),l()}catch(a){console.error("Failed to delete image:",a)}},g=async e=>{if(!s[e])return alert("Please select a file to update.");const a=new FormData;a.append("image",s[e]);try{await n.put(`/gallery/update/${e}`,a,{headers:{"Content-Type":"multipart/form-data"}}),d(r=>({...r,[e]:null})),l()}catch(r){console.error("Failed to update image:",r)}};return t.jsxs("div",{className:"p-6 bg-white shadow-md rounded-2xl",children:[t.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Image List"}),i.length===0?t.jsx("p",{className:"text-gray-500 text-center",children:"No images found"}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6",children:i.map(e=>t.jsxs("div",{className:"border rounded-xl overflow-hidden shadow hover:shadow-lg transition",children:[t.jsx("img",{src:e.url,alt:"gallery",className:"w-full h-48 object-cover"}),t.jsxs("div",{className:"p-3 flex flex-col gap-2",children:[t.jsx("input",{type:"file",accept:"image/*",onChange:a=>d({...s,[e._id]:a.target.files[0]})}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("button",{onClick:()=>g(e._id),className:"bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700 transition",children:"Update"}),t.jsx("button",{onClick:()=>h(e._id),className:"bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700 transition",children:"Delete"})]})]})]},e._id))})]})};export{x as default};
